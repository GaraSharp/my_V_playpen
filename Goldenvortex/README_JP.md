#  Golden-ratio vortex drawing with V gg

黄金比によって構成される「黄金四辺形」に描かれる、黄金螺旋の回転アニメーションです。


#  事の起こり

先日、NHK 教育テレビで放映された「３ヶ月でマスターする数学」にて、黄金螺旋を回転させると、渦が迫る様に見えたりとか、遠ざかる様に見えたりする、というお話をやっていたので、V言語で表示するプログラムを拵えてみた次第です。


## lista-manifesto

- golden-vort.v
  プログラム本体ですだよ


#  usage and dosage

単純に、`v run golden-vort.v` と入力すればオッケーです。

オプションも何もありません。
実行中に、スペースバーを押すと、回転方向が反転します。
また、カーソルキーの上下で、回転速度が変化します。


#  inside code

黄金比四辺形に描かれる黄金螺旋。最初は1/4円を描いて、そこから、半径を小さくして、1/4円を接続する様に描くつづけ、徐々に縮小していくと、1/4円が連なって、螺旋を構成するそうです。

そこで、1/4円を描くため、タートルグラフィクスの手法を使用しております。

1/4円を描き、徐々に縮小していく、その回数を10回程度行うと、螺旋の「収束点」が得られるのですが、この点を得るため、最初に計算を10回程度行って、座標を求めます。
計算して得られた座標を回転の中心とする様に座標移動を行い、タートルグラフィクス的に、1/4円を描いていきます。
実際には、配列に計算した座標を保存し、gg.run() の中で呼び出されるスレッド frame() で、配列に記録した座標を線で結ぶ事で、螺旋を表示しております。

V gg では、一度のフレームで描けるゴラフィクス・オブジェクトの数に制限があるとかで、この上限を擬似的に突破する手段があるそうですが、golden-vort.v では、座標の上限を 5000 にしていて、これくらいだと、一度の frame で表示できる様です。

1/4円を縮小しつつ、何個か描けばよいのでしょうが、円弧を回転した状態で連接して描くのは大変「面倒臭い」計算が要ります。タートルグラフィクスの手法ならば、単純に1/4円を縮小しつつ連続して描くだけで済みそうです。

その分、計算量が増えておりますが、V の5000個くらいの座標計算なら、どうにかなるのではないか、という甘い見通しで始めましたが、十分に計算できる様です。


Revision historica :

- 2024-10-15 
  first appearance


